<html>
<head>
        <meta charset="utf-8" />
        <title>WIFI小车客户端</title>
        <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>

<body>
    <center>
      <img src="http://192.168.0.118:8080/?action=stream" width="680";height="480"/>
	  <!--<img src="http://192.168.43.156:8080/?action=stream";/> -->
    </center>
</body>

<script type="text/javascript">
        function go(k){
                var requestTime= new Date().getTime();
                $.post('/',{k:k,time:requestTime},function(){},"json");
        }
        $(function(){
                var i = null;
                window.document.onkeydown = keyDown;
                function keyDown(env){
                        env = (env) ? env : window.event;
						console.log(env.keyCode);
                        if(env.keyCode=='87'){
                                go('w');
                        }
                        if(env.keyCode=='83'){
                                go('s');
                        }
                        if(env.keyCode=='65'){
                                go('a');
                        }
                        if(env.keyCode=='68'){
                                go('d');
                        }
						if(env.keyCode=='38'){
								go('i')
						}
						if(env.keyCode=='37'){
								go('j')
						}
						if(env.keyCode=='40'){
								go('k')
						}
						if(env.keyCode=='39'){
								go('l')
						}
						if(env.keyCode=='70'){
								go('f')
						}
						if(env.keyCode=='97'){
								go('1')
						}
						if(env.keyCode=='98'){
								go('2')
						}
						if(env.keyCode=='96'){
								go('0')
						}
						if(env.keyCode=='110'){
								go('.')
						}
					
                };
                window.document.onkeyup = keyUp;
                function keyUp(env){
                        env = (env) ? env : window.event;
                        if(env.keyCode=='87'){
                                go('stop_car');
                        }
                        if(env.keyCode=='83'){
                                go('stop_car');
                        }
                        if(env.keyCode=='65'){
                                go('stop_car');
                        }
                        if(env.keyCode=='68'){
                                go('stop_car');
                        }
						if(env.keyCode=='38'){
								go('stop_servo')
						}
						if(env.keyCode=='37'){
								go('stop_servo')
						}
						if(env.keyCode=='40'){
								go('stop_servo')
						}
						if(env.keyCode=='39'){
								go('stop_servo')
						}
						if(env.keyCode=='70'){
								go('stop_servo')
						}
						if(env.keyCode=='97'){
								go('stop_servo')
						}
						if(env.keyCode=='98'){
								go('stop_servo')
						}
                }
                $('.before').mousedown(function(){
                        i = setInterval(function(){
                                go('w');
                        },50);
                });
                $('.left').mousedown(function(){
                        i = setInterval(function(){
                                go('a');
                        },50);
                });
                $('.right').mousedown(function(){
                        i = setInterval(function(){
                                go('d');
                        },50);
                });
                $('.cabk').mousedown(function(){
                        i = setInterval(function(){
                                go('s');
                        },50);
                });
                $('#main span').mouseup(function(){
                        clearInterval(i);
                        go('stop_car');
                });
        });

 
		
</script>
<style type="text/css">
        #main{width: 150px;height: 150px;background: #ccc;}
        #main span{width: 50px;height: 50px;float: left;z-index: 999;}
        #main span.on2{background: #ff00ff;}
</style>
<div id="main">
        <span></span>
        <span class="on2 before"></span>
        <span></span>
        <span class="on2 left"></span>
        <span></span>
        <span class="on2 right"></span>
        <span></span>
        <span class="on2 cabk"></span>
        <span></span>
</div>
</body>
</html>

